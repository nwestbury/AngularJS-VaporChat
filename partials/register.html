<form class="form-horizontal spacer" name="registerFrom">
    <div class="form-group">
        <label for="register_username" class="col-sm-2 control-label">Username</label>
        <div class="col-sm-10">
            <input name="name" type="text" class="form-control" id="register_username" ng-model="user.name" placeholder="Username" ng-required="true" ng-pattern="/^[a-zA-Z0-9]*$/" ng-focus="errormsg=''" required>
        </div>
    </div>
    <div class="form-group">
        <label for="register_pass" class="col-sm-2 control-label">Password</label>
        <div class="col-sm-10">
            <input name="pass" type="password" class="form-control" id="register_pass" ng-model="user.pass" ng-minlength="8" ng-required="true" placeholder="Password" required>
        </div>
    </div>
    <div class="form-group">
        <label for="register_email" class="col-sm-2 control-label">Email</label>
        <div class="col-sm-10">
            <input name="email" type="email" class="form-control" id="register_email" ng-model="user.email" ng-required="true" placeholder="Email" ng-focus="errormsg=''" required>
        </div>
    </div>
      <div class="form-group">
        <label for="icon" class="col-sm-2 control-label">Icon</label>
        <div class="col-sm-10">
            <input type="file" accept="image/*" ng-model="icon" ngf-select ng-required="true" required /> 
            <img ng-show="icon[0] != null" ngf-src="icon[0]" height="auto" width="64px" class="thumb">
            <span class="progress" ng-show="icon[0].progress >= 0">
                <div class="progress">
                    <div class="progress-bar active" aria-valuemin="0" aria-valuemax="100" aria-valuenow="{{icon[0].progress}}" style="width: {{icon[0].progress}}%;" value="{{icon[0].progress}}" ng-bind="icon[0].progress + '%'"></div>
                </div>
			</span>
        </div>
      </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" class="btn btn-default" ng-disabled="registerFrom.$invalid" ng-click="register(user, icon)">Register</button>
          <a class="btn btn-link" href="#/login">Back</a>
        </div>
        <div class="col-sm-offset-2 col-sm-10 spacer" ng-class="{'text-danger': errormsg || !successmsg, 'text-success': successmsg}">
            <span ng-show="registerFrom.pass.$error.minlength">
                Password is too short (at least 8 characters).
            </span>
            <span ng-show="registerFrom.name.$error.pattern">
                Username can only contain numbers and letters.
            </span>
            <span class="error" ng-show="registerFrom.$error.valid">
                Invalid form!
            </span>
            <span class="error" ng-show="registerFrom.input.$error.required">
                All fields are required!
            </span>
            <span class="error" ng-show="registerFrom.email.$error.email">
                Please input a valid email.
            </span>
            <span class="error" ng-show="errormsg">
                {{ errormsg }}
            </span>
            <span class="success" ng-show="successmsg">
                {{ successmsg }}
            </span>
        </div> 
      </div>
</form>
